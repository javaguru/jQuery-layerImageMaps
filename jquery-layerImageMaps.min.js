/*
 * layerImageMaps jQuery plugin v1.0
 *
 * Allows layer injection based on maps area coords(x,y,-,-)
 *
 * Copyright (c) 2015 Franck Andriano
 * https://github.com/javaguru/jQuery-layerImageMaps
 * Licensed under the MIT license
 *
 ***
 * Original code by Matt Stow
 * https://github.com/stowball/jQuery-rwdImageMaps
 *
 * Modified by Franck Andriano 23/04/2015
 *
 */
 ;(function(a){a.fn.layerImageMaps=function(d){var f=this,e=f.find("img[usemap]");var b={ajustTop:0,ajustLeft:0};this.options=a.extend({},b,d);console.log("Init layerImageMaps area: #"+this.attr("id"));var c=function(){e.each(function(){if(typeof(a(this).attr("usemap"))=="undefined"){return}var h=this,g=a(h);a("<img />").load(function(){var i=g.attr("width"),l=g.attr("height");if(!i||!l){var j=new Image();j.src=g.attr("src");if(!i){i=j.width}if(!l){l=j.height}}var k=g.width()/100,n=g.height()/100,m=g.attr("usemap").replace("#",""),o="coords";a('map[name="'+m+'"]').find("area").each(function(){var t=a(this);if(!t.data(o)){t.data(o,t.attr(o))}var s=t.data(o).split(","),r=new Array(s.length);var q=a("#layer-"+t.attr("data-id"));q.appendTo(f);var u={};for(var p=0;p<r.length;++p){if(p%2===0){r[p]=parseInt(((s[p]/i)*100)*k);if(p==0){u.left=r[p]}}else{r[p]=parseInt(((s[p]/l)*100)*n);if(p==1){u.top=r[p]}}}a(q).css({position:"absolute",top:(u.top+f.options.ajustTop)+"px",left:(u.left+f.options.ajustLeft)+"px"}).show()})}).attr("src",g.attr("src"))})};a(window).resize(c).trigger("resize");return this}})(jQuery);
